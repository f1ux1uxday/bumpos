<!DOCTYPE html>

<html>
<head>
  <link
    rel="stylesheet"
    href="bumpos.css"
    type="text/css"
  >
  <Title> BETO POINT OF SALE </Title>

</head>

<body>
  <div class='container'>
    <form class="customer-info">

      <h2 class="page-head">
        BETO Point Of Sale
      </h2>

      <input
        type="text"
        id="name"
        name="name"
        placeholder="Name"
        required
      />

      <input
        type="email"
        id="email"
        name="email"
        placeholder="Email"
        required
      />
 
      <input
        type="text"
        id="employer"
        name="employer"
        placeholder="Employer"
        required
      />

      <input
        type="text"
        id="occupation"
        name="occupation"
        placeholder="Occupation"
        required
      />

      <input
        type="text"
        id="address1"
        name="street_address_1"
        placeholder="Address Line 1"
        required
      />

      <input
        type="text"
        id="address2"
        name="street_address_2"
        placeholder="Address Line 2"
      />

      <input
        type="text"
        id="city"
        name="city"
        placeholder="City"
        required
      />
 
      <input
        type="number"
        id="zip"
        name="zip"
        placeholder="Zip"
        required
      />

      <select id="state" name="state" default="State" required>
        <option value="">State</option>
        <option value="WY">Wyoming</option>
        <option value="WI">Wisconsin</option>
        <option value="WV">West Virginia</option>
        <option value="WA">Washington</option>
        <option value="VA">Virginia</option>
        <option value="VT">Vermont</option>
        <option value="UT">Utah</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="SD">South Dakota</option>
        <option value="SC">South Carolina</option>
        <option value="RI">Rhode Island</option>
        <option value="PA">Pennsylvania</option>
        <option value="OR">Oregon</option>
        <option value="OK">Oklahoma</option>
        <option value="OH">Ohio</option>
        <option value="ND">North Dakota</option>
        <option value="NC">North Carolina</option>
        <option value="NY">New York</option>
        <option value="NM">New Mexico</option>
        <option value="NJ">New Jersey</option>
        <option value="NH">New Hampshire</option>
        <option value="NV">Nevada</option>
        <option value="NE">Nebraska</option>
        <option value="MT">Montana</option>
        <option value="MO">Missouri</option>
        <option value="MS">Mississippi</option>
        <option value="MN">Minnesota</option>
        <option value="MI">Michigan</option>
        <option value="MA">Massachusetts</option>
        <option value="MD">Maryland</option>
        <option value="ME">Maine</option>
        <option value="LA">Louisiana</option>
        <option value="KY">Kentucky</option>
        <option value="KS">Kansas</option>
        <option value="IA">Iowa</option>
        <option value="IN">Indiana</option>
        <option value="IL">Illinois</option>
        <option value="ID">Idaho</option>
        <option value="HI">Hawaii</option>
        <option value="GA">Georgia</option>
        <option value="FL">Florida</option>
        <option value="DC">District of Columbia</option>
        <option value="DE">Delaware</option>
        <option value="CT">Connecticut</option>
        <option value="CO">Colorado</option>
        <option value="CA">California</option>
        <option value="AR">Arkansas</option>
        <option value="AZ">Arizona</option>
        <option value="AK">Alaska</option>
        <option value="AL">Alabama</option>
      </select>

      <select
        id="certify"
        placeholder="Scroll Down To Certify"
        required
      >
        <option value="">
          Scroll Down To Certify
        </option>
        <option id="yes" value="yes">
          "Yes - The Above Information Is True And Correct"
        </option>
      </select>
 
      <input
        type="number"
        id="cost"
        placeholder="Purchase Amount"
        min="1"
      />

      <div class="btnDiv">
        <a
          id="passBtn"
          onclick="sendToSquare()"
        >
           Verify Information
        </a>
      </div>

    </form>
  </div>
  <script>
    let sendToSquare = () => {
      let purchaseCost = document.getElementById('cost').value
      let customerName = document.getElementById('name').value
      let customerEmail = document.getElementById('email').value
      let customerAddress = document.getElementById('address1').value
      let customerCity = document.getElementById('city').value
      let customerState = document.getElementById('state').value
      let customerZip = document.getElementById('zip').value
      let customerEmployer = document.getElementById('employer').value
      let customerOccupation = document.getElementById('occupation').value
      let customerCertify = document.getElementById('certify').value
      let requiredFields = [
        purchaseCost,
        customerName,
        customerEmail,
        customerAddress,
        customerCity,
        customerState,
        customerZip,
        customerEmployer,
        customerOccupation,
        customerCertify
      ]
      // Add requiredFields data to dataParameter in "state" field
      // to access customer info in callback URL
      let dataParameter = {
        "amount_money": {
          "amount" : parseInt(purchaseCost, 10) * 100,
          "currency_code" : "USD",
        },
        "callback_url" : "https://192.168.1.230:3000", // Replace this value with your application's callback URL
        "client_id" : "sq0idp-vMnCSh9T6D_IAosDWXLASA", // Application ID
        "version": "1.3",
        "options" : {
          "supported_tender_types" : ["CREDIT_CARD","CASH"]
        },
      };
      if (requiredFields.includes("")) {
        window.alert('Please enter information in all fields')
      } else if (requiredFields[0] < 1) {
        window.alert('Cost must be at least 1')
      } else if (requiredFields[6].length != 5) {
        window.alert('Zip Code must be at least 5 digits')
      } else if (!requiredFields.includes("") && requiredFields[0] >= 1) {
        let squareURI = "square-commerce-v1://payment/create?data=" +
        encodeURIComponent(JSON.stringify(dataParameter));
        document.getElementById('passBtn').setAttribute("href", squareURI)
        document.getElementById('passBtn').innerText = 'Continue Transaction'
        console.log(dataParameter.amount_money.amount)
        console.log(requiredFields)
      }
    }

  </script>
</body>

</html>
